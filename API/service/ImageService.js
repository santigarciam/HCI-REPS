'use strict';const _0x55a0=['Image','update','queryById','1dDuCzn','../errors/errors','29fFbHwx','7513nIZrgf','202001dspdEZ','deleteById','retrieve','mapImageEntity','create','modify','263ImAQfQ','./ModelMapper','content','\x20not\x20found','43734GhAWPL','Image\x20id\x20','22YHZONB','138401aFsIeU','insert','queryByAdvancedFilter','remove','5NFIewb','Exercise\x20id\x20','348032cWQCYn','exports','retrieveList','User\x20is\x20not\x20the\x20owner\x20of\x20exercise\x20id\x20','userId','Exercise','141326SRPChH','../repository/RepositoryFactory','add'];const _0xc61b94=_0x21be;(function(_0x535d8d,_0x32b1cd){const _0x1a6710=_0x21be;while(!![]){try{const _0x5d241e=-parseInt(_0x1a6710(0x18f))+-parseInt(_0x1a6710(0x17c))*parseInt(_0x1a6710(0x197))+parseInt(_0x1a6710(0x183))+-parseInt(_0x1a6710(0x187))*-parseInt(_0x1a6710(0x180))+-parseInt(_0x1a6710(0x195))*-parseInt(_0x1a6710(0x199))+-parseInt(_0x1a6710(0x189))+parseInt(_0x1a6710(0x182))*parseInt(_0x1a6710(0x198));if(_0x5d241e===_0x32b1cd)break;else _0x535d8d['push'](_0x535d8d['shift']());}catch(_0x18184c){_0x535d8d['push'](_0x535d8d['shift']());}}}(_0x55a0,0x3782d));const {RepositoryName,RepositoryFactory}=require(_0xc61b94(0x190)),{ModelMapper}=require(_0xc61b94(0x17d)),{NotFoundError,ForbiddenError}=require(_0xc61b94(0x196));async function ensureExercise(_0x9f14da,_0x44569d,_0x31ea09=!![]){const _0x127d59=_0xc61b94,_0x2dba01=RepositoryFactory['create'](RepositoryName[_0x127d59(0x18e)]),_0x298582=await _0x2dba01['queryById'](_0x44569d);if(!_0x298582)throw new NotFoundError([_0x127d59(0x188)+_0x44569d+_0x127d59(0x17f)]);if(_0x31ea09&&_0x298582[_0x127d59(0x18d)]!==_0x9f14da['id'])throw new ForbiddenError([_0x127d59(0x18c)+_0x44569d]);return _0x298582;}function _0x21be(_0x17d8ec,_0x1bb6b9){_0x17d8ec=_0x17d8ec-0x17c;let _0x55a046=_0x55a0[_0x17d8ec];return _0x55a046;}async function ensureImage(_0x2e9e8f){const _0x347d15=_0xc61b94,_0xc1adae=RepositoryFactory[_0x347d15(0x19d)](RepositoryName[_0x347d15(0x192)]);let _0x4540fb=await _0xc1adae[_0x347d15(0x194)](_0x2e9e8f);if(!_0x4540fb)throw new NotFoundError([_0x347d15(0x181)+_0x2e9e8f+_0x347d15(0x17f)]);return _0x4540fb;}module[_0xc61b94(0x18a)][_0xc61b94(0x191)]=async(_0x2e3197,_0x3ea1bf,_0x300d23)=>{const _0x190a9a=_0xc61b94;await ensureExercise(_0x2e3197,_0x3ea1bf);const _0xc6eb83=ModelMapper['mapImageDto'](_0x300d23,_0x3ea1bf),_0x519705=RepositoryFactory[_0x190a9a(0x19d)](RepositoryName[_0x190a9a(0x192)]),_0x16f88b=await _0x519705[_0x190a9a(0x184)](_0xc6eb83);return ModelMapper[_0x190a9a(0x19c)](_0x16f88b);},module['exports'][_0xc61b94(0x19e)]=async(_0x43963d,_0xd06501,_0x16183a,_0x9e85f3)=>{const _0xeb84b=_0xc61b94;await ensureExercise(_0x43963d,_0xd06501);const _0x3c5fd1=RepositoryFactory[_0xeb84b(0x19d)](RepositoryName['Image']);let _0x39ffa1=await ensureImage(_0x16183a);return ModelMapper['updateImageDto'](_0x39ffa1,_0x9e85f3),_0x39ffa1=await _0x3c5fd1[_0xeb84b(0x193)](_0x39ffa1),ModelMapper[_0xeb84b(0x19c)](_0x39ffa1);},module[_0xc61b94(0x18a)][_0xc61b94(0x186)]=async(_0xe1a09b,_0x23cec9,_0x4f3181)=>{const _0xd037bf=_0xc61b94;await ensureExercise(_0xe1a09b,_0x23cec9);const _0xb5115a=RepositoryFactory[_0xd037bf(0x19d)](RepositoryName['Image']),_0x4deb45=await _0xb5115a[_0xd037bf(0x19a)](_0x4f3181);if(_0x4deb45===0x0)throw new NotFoundError([_0xd037bf(0x181)+_0x4f3181+_0xd037bf(0x17f)]);},module[_0xc61b94(0x18a)][_0xc61b94(0x19b)]=async(_0x1dcb30,_0x30273f,_0x49d2a6)=>{const _0x12513c=_0xc61b94;await ensureExercise(_0x1dcb30,_0x30273f,![]);const _0x148807=await ensureImage(_0x49d2a6);return ModelMapper[_0x12513c(0x19c)](_0x148807);},module[_0xc61b94(0x18a)][_0xc61b94(0x18b)]=async(_0x298df1,_0x2ca344,_0x497fbf,_0xd4cec7,_0x378f2d,_0x3a4b6b)=>{const _0x2c6b77=_0xc61b94;await ensureExercise(_0x298df1,_0x2ca344,![]);const _0x5736e2={'exerciseId':_0x2ca344},_0x4ed82c=RepositoryFactory[_0x2c6b77(0x19d)](RepositoryName['Image']);let _0x175b61=await _0x4ed82c[_0x2c6b77(0x185)](_0x5736e2,null,_0x497fbf,_0xd4cec7,_0x378f2d,_0x3a4b6b);return _0x175b61[_0x2c6b77(0x17e)]=_0x175b61['content']['map'](_0xecb05f=>ModelMapper[_0x2c6b77(0x19c)](_0xecb05f)),_0x175b61;};