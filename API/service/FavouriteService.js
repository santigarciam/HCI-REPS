'use strict';const _0x470d=['./ModelMapper','Category','routineId','create','User','Routine\x20id\x20','../repository/RepositoryFactory','\x20not\x20found','Routine','queryById','map','mapPublicUserEntity','mapRoutineEntity','224108miIkMi','remove','mapCategoryEntity','187rNRDgY','deleteByFilter','exports','../errors/errors','268591gdDGiG','1314849toMVxB','363462qimLVc','insert','all','mapFavouriteEntity','Category\x20id\x20','293499OWdVRi','2053UQEGFZ','Favourite','userId','categoryId','add','28631WMwrJZ','content'];const _0x1ad19b=_0x3169;(function(_0x4c628d,_0x713592){const _0x1428fa=_0x3169;while(!![]){try{const _0x52f03b=-parseInt(_0x1428fa(0x20f))+-parseInt(_0x1428fa(0x208))+parseInt(_0x1428fa(0x204))*-parseInt(_0x1428fa(0x1ed))+-parseInt(_0x1428fa(0x1f2))+parseInt(_0x1428fa(0x201))+-parseInt(_0x1428fa(0x20a))+parseInt(_0x1428fa(0x209));if(_0x52f03b===_0x713592)break;else _0x4c628d['push'](_0x4c628d['shift']());}catch(_0x2c6013){_0x4c628d['push'](_0x4c628d['shift']());}}}(_0x470d,0x3109f));const {RepositoryName,RepositoryFactory}=require(_0x1ad19b(0x1fa)),{ModelMapper}=require(_0x1ad19b(0x1f4)),{NotFoundError}=require(_0x1ad19b(0x207));function _0x3169(_0x3644e7,_0x3eb3a3){_0x3644e7=_0x3644e7-0x1ed;let _0x470d67=_0x470d[_0x3644e7];return _0x470d67;}async function ensureCategory(_0x5378a2){const _0xb23211=_0x1ad19b,_0x4a5b61=RepositoryFactory[_0xb23211(0x1f7)](RepositoryName[_0xb23211(0x1f5)]);let _0x5201c6=await _0x4a5b61['queryById'](_0x5378a2);if(!_0x5201c6)throw new NotFoundError([_0xb23211(0x20e)+_0x5378a2+'\x20not\x20found']);return _0x5201c6;}async function ensureRoutine(_0x2442ee){const _0x2053fc=_0x1ad19b,_0x53a410=RepositoryFactory[_0x2053fc(0x1f7)](RepositoryName[_0x2053fc(0x1fc)]);let _0x567ffc=await _0x53a410[_0x2053fc(0x1fd)](_0x2442ee);if(!_0x567ffc)throw new NotFoundError([_0x2053fc(0x1f9)+_0x2442ee+_0x2053fc(0x1fb)]);return _0x567ffc;}async function deepMapFavourite(_0x1fe5c2){const _0x46a359=_0x1ad19b,_0x458b0c=await ensureRoutine(_0x1fe5c2[_0x46a359(0x1f6)]),_0x5b46f2=RepositoryFactory[_0x46a359(0x1f7)](RepositoryName[_0x46a359(0x1f8)]),_0x3139c2=await _0x5b46f2[_0x46a359(0x1fd)](_0x458b0c[_0x46a359(0x1ef)]);let _0x39dfcd;if(_0x458b0c[_0x46a359(0x1f0)])_0x39dfcd=await ensureCategory(_0x458b0c[_0x46a359(0x1f0)]);return ModelMapper[_0x46a359(0x20d)](_0x1fe5c2,ModelMapper[_0x46a359(0x200)](_0x458b0c,_0x3139c2?ModelMapper[_0x46a359(0x1ff)](_0x3139c2):undefined,_0x39dfcd?ModelMapper[_0x46a359(0x203)](_0x39dfcd):undefined));}module['exports'][_0x1ad19b(0x1f1)]=async(_0x3a3f57,_0x17a4c6)=>{const _0x5a7090=_0x1ad19b;await ensureRoutine(_0x17a4c6);const _0x589070=RepositoryFactory[_0x5a7090(0x1f7)](RepositoryName[_0x5a7090(0x1ee)]);await _0x589070[_0x5a7090(0x20b)]({'userId':_0x3a3f57['id'],'routineId':_0x17a4c6});},module[_0x1ad19b(0x206)][_0x1ad19b(0x202)]=async(_0x1a4e19,_0x1608ac)=>{const _0x3b43e8=_0x1ad19b;await ensureRoutine(_0x1608ac);const _0x192ea5=RepositoryFactory[_0x3b43e8(0x1f7)](RepositoryName['Favourite']);await _0x192ea5[_0x3b43e8(0x205)]({'userId':_0x1a4e19['id'],'routineId':_0x1608ac});},module[_0x1ad19b(0x206)]['retrieveList']=async(_0x372480,_0x4e9470,_0x527283,_0x3e6407,_0x13b64b)=>{const _0x252337=_0x1ad19b,_0x4404a6={'userId':_0x372480['id']},_0x556ed6=RepositoryFactory[_0x252337(0x1f7)](RepositoryName['Favourite']);let _0x1a8b21=await _0x556ed6['queryByAdvancedFilter'](_0x4404a6,null,_0x4e9470,_0x527283,_0x3e6407,_0x13b64b);return _0x1a8b21[_0x252337(0x1f3)]=await Promise[_0x252337(0x20c)](_0x1a8b21['content'][_0x252337(0x1fe)](async _0x1369b6=>{return await deepMapFavourite(_0x1369b6);})),_0x1a8b21;};