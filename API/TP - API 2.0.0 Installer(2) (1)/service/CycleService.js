'use strict';const _0x1688=['Exercise','Cycle','343380PcAyXT','deleteByFilter','\x20not\x20found','content','remove','removeExercise','modifyExercise','mapCycleDto','User\x20is\x20not\x20the\x20owner\x20of\x20routine\x20id\x20','Routine','mapCycleExerciseEntity','deleteById','1026136ycmpds','User\x20is\x20not\x20the\x20owner\x20of\x20exercise\x20id\x20','add','User\x20is\x20not\x20the\x20owner\x20of\x20cycle\x20id\x20','../errors/errors','mapExerciseEntity','Routine\x20id\x20','addExercise','userId','285431YeFjZm','updateCycleDto','610953GTWMCl','Cycle\x20id\x20','34323MIrZiE','all','Exercise\x20id\x20','mapCycleEntity','exerciseId','insert','2CgwVIa','map','./ModelMapper','1iCvOXK','routineId','CycleExercise','exports','modify','queryByAdvancedFilter','mapCycleExerciseDto','queryById','734309bICaaH','retrieveExerciseList','393044fesIKq','update','create'];function _0x5b53(_0x2d7c32,_0x5cc65b){_0x2d7c32=_0x2d7c32-0x1b2;let _0x168844=_0x1688[_0x2d7c32];return _0x168844;}const _0x51444a=_0x5b53;(function(_0x271b86,_0x539021){const _0x53b27d=_0x5b53;while(!![]){try{const _0x5b5e80=-parseInt(_0x53b27d(0x1d2))+parseInt(_0x53b27d(0x1db))+parseInt(_0x53b27d(0x1df))+parseInt(_0x53b27d(0x1c6))+-parseInt(_0x53b27d(0x1dd))+parseInt(_0x53b27d(0x1bf))*parseInt(_0x53b27d(0x1b7))+parseInt(_0x53b27d(0x1c1))*parseInt(_0x53b27d(0x1b4));if(_0x5b5e80===_0x539021)break;else _0x271b86['push'](_0x271b86['shift']());}catch(_0x591979){_0x271b86['push'](_0x271b86['shift']());}}}(_0x1688,0x8568a));const {RepositoryName,RepositoryFactory}=require('../repository/RepositoryFactory'),{ModelMapper}=require(_0x51444a(0x1b6)),{NotFoundError,ForbiddenError}=require(_0x51444a(0x1d6));async function ensureRoutine(_0x6eb143,_0x142e1a,_0x2a0e20=!![]){const _0x4cc261=_0x51444a,_0x5972d0=RepositoryFactory[_0x4cc261(0x1c3)](RepositoryName[_0x4cc261(0x1cf)]);let _0xfd8c11=await _0x5972d0[_0x4cc261(0x1be)](_0x142e1a);if(!_0xfd8c11)throw new NotFoundError([_0x4cc261(0x1d8)+_0x142e1a+_0x4cc261(0x1c8)]);if(_0x2a0e20&&_0xfd8c11[_0x4cc261(0x1da)]!==_0x6eb143['id'])throw new ForbiddenError([_0x4cc261(0x1ce)+_0x142e1a]);return _0xfd8c11;}async function ensureCycle(_0x59fa17,_0x4a3a41){const _0x349e43=_0x51444a,_0xdeb5f2=RepositoryFactory[_0x349e43(0x1c3)](RepositoryName[_0x349e43(0x1c5)]);let _0x4f7a47=await _0xdeb5f2[_0x349e43(0x1be)](_0x4a3a41);if(!_0x4f7a47)throw new NotFoundError([_0x349e43(0x1de)+_0x4a3a41+_0x349e43(0x1c8)]);if(_0x4f7a47[_0x349e43(0x1da)]!==_0x59fa17['id'])throw new ForbiddenError([_0x349e43(0x1d5)+_0x4a3a41]);return _0x4f7a47;}async function ensureExercise(_0x442eff,_0x2cc046){const _0x15c29b=_0x51444a,_0x102aa8=RepositoryFactory['create'](RepositoryName[_0x15c29b(0x1c4)]);let _0x14a806=await _0x102aa8[_0x15c29b(0x1be)](_0x2cc046);if(!_0x14a806)throw new NotFoundError([_0x15c29b(0x1e1)+_0x2cc046+_0x15c29b(0x1c8)]);if(_0x14a806['userId']!==_0x442eff['id'])throw new ForbiddenError([_0x15c29b(0x1d3)+_0x2cc046]);return _0x14a806;}function ensureRoutineCycleRelationship(_0x3da3c1,_0x834614){const _0x591b2a=_0x51444a;if(_0x3da3c1[_0x591b2a(0x1b8)]!==_0x834614)throw new ForbiddenError([_0x591b2a(0x1de)+_0x3da3c1['id']+'\x20is\x20not\x20related\x20to\x20routine\x20id\x20'+_0x834614]);}module[_0x51444a(0x1ba)][_0x51444a(0x1d4)]=async(_0x290f2e,_0x5af399,_0x393faa)=>{const _0x5ea887=_0x51444a;await ensureRoutine(_0x290f2e,_0x5af399);const _0x40e123=RepositoryFactory[_0x5ea887(0x1c3)](RepositoryName['Cycle']),_0x1799d2=ModelMapper[_0x5ea887(0x1cd)](_0x393faa,_0x290f2e['id'],_0x5af399),_0x39701a=await _0x40e123[_0x5ea887(0x1b3)](_0x1799d2);return ModelMapper[_0x5ea887(0x1e2)](_0x39701a);},module[_0x51444a(0x1ba)][_0x51444a(0x1bb)]=async(_0x4d23bc,_0x1b452e,_0x1490e8,_0x490a64)=>{const _0x313f64=_0x51444a;await ensureRoutine(_0x4d23bc,_0x1b452e);let _0x592fc0=await ensureCycle(_0x4d23bc,_0x1490e8);ensureRoutineCycleRelationship(_0x592fc0,_0x1b452e);const _0x28eed0=RepositoryFactory[_0x313f64(0x1c3)](RepositoryName[_0x313f64(0x1c5)]);return ModelMapper[_0x313f64(0x1dc)](_0x592fc0,_0x490a64),_0x592fc0=await _0x28eed0[_0x313f64(0x1c2)](_0x592fc0),ModelMapper[_0x313f64(0x1e2)](_0x592fc0);},module[_0x51444a(0x1ba)][_0x51444a(0x1ca)]=async(_0x304f9a,_0x3cb890,_0x5a3080)=>{const _0x5121d0=_0x51444a;await ensureRoutine(_0x304f9a,_0x3cb890);const _0x3f5638=await ensureCycle(_0x304f9a,_0x5a3080);ensureRoutineCycleRelationship(_0x3f5638,_0x3cb890);const _0x4ff1ae=RepositoryFactory[_0x5121d0(0x1c3)](RepositoryName[_0x5121d0(0x1c5)]);await _0x4ff1ae[_0x5121d0(0x1d1)](_0x5a3080);},module[_0x51444a(0x1ba)]['retrieve']=async(_0x13afe7,_0x2dcef0,_0x2df79d)=>{const _0x2d5fac=_0x51444a;await ensureRoutine(_0x13afe7,_0x2dcef0);const _0x55b99=await ensureCycle(_0x13afe7,_0x2df79d,_0x2dcef0);return ModelMapper[_0x2d5fac(0x1e2)](_0x55b99);},module[_0x51444a(0x1ba)]['retrieveList']=async(_0x12825f,_0x3e101b,_0x16f585,_0x19a960,_0xd351d4,_0x2f82ca)=>{const _0x45d7d2=_0x51444a;await ensureRoutine(_0x12825f,_0x3e101b,![]);const _0x349f15={'routineId':_0x3e101b},_0x21ee45=RepositoryFactory[_0x45d7d2(0x1c3)](RepositoryName[_0x45d7d2(0x1c5)]);let _0x7dedfd=await _0x21ee45[_0x45d7d2(0x1bc)](_0x349f15,null,_0x16f585,_0x19a960,_0xd351d4,_0x2f82ca);return _0x7dedfd[_0x45d7d2(0x1c9)]=_0x7dedfd[_0x45d7d2(0x1c9)][_0x45d7d2(0x1b5)](_0x3f38ef=>ModelMapper[_0x45d7d2(0x1e2)](_0x3f38ef)),_0x7dedfd;},module[_0x51444a(0x1ba)][_0x51444a(0x1d9)]=async(_0x1354e5,_0x4e5444,_0x598635,_0x1d0beb)=>{const _0x4133e2=_0x51444a;await ensureCycle(_0x1354e5,_0x4e5444);const _0x147379=await ensureExercise(_0x1354e5,_0x598635),_0xd4cac7=ModelMapper[_0x4133e2(0x1bd)](_0x1d0beb,_0x4e5444,_0x598635),_0x182f5a=RepositoryFactory[_0x4133e2(0x1c3)](RepositoryName['CycleExercise']),_0x59718f=await _0x182f5a[_0x4133e2(0x1b3)](_0xd4cac7);return ModelMapper[_0x4133e2(0x1d0)](_0x59718f,ModelMapper[_0x4133e2(0x1d7)](_0x147379));},module['exports'][_0x51444a(0x1cc)]=async(_0x2adf84,_0x109264,_0x6729fd,_0x2bf031)=>{const _0x317822=_0x51444a;await ensureCycle(_0x2adf84,_0x109264);const _0xb5fe6c=await ensureExercise(_0x2adf84,_0x6729fd);let _0x48e280=ModelMapper[_0x317822(0x1bd)](_0x2bf031,_0x109264,_0x6729fd);const _0x1172ac=RepositoryFactory[_0x317822(0x1c3)](RepositoryName[_0x317822(0x1b9)]);return _0x48e280=await _0x1172ac[_0x317822(0x1c2)](_0x48e280),ModelMapper[_0x317822(0x1d0)](_0x48e280,ModelMapper[_0x317822(0x1d7)](_0xb5fe6c));},module[_0x51444a(0x1ba)][_0x51444a(0x1cb)]=async(_0x239b38,_0x48d206,_0x2035bf)=>{const _0x53abc9=_0x51444a;await ensureCycle(_0x239b38,_0x48d206),await ensureExercise(_0x239b38,_0x2035bf);const _0x17a54a=RepositoryFactory['create'](RepositoryName[_0x53abc9(0x1b9)]);await _0x17a54a[_0x53abc9(0x1c7)]({'cycleId':_0x48d206,'exerciseId':_0x2035bf});},module[_0x51444a(0x1ba)]['retrieveExercise']=async(_0x37ed72,_0x310fcb,_0x477124)=>{const _0x323748=_0x51444a;await ensureCycle(_0x37ed72,_0x310fcb);const _0x20f655=await ensureExercise(_0x37ed72,_0x477124),_0x1c89a3=RepositoryFactory[_0x323748(0x1c3)](RepositoryName['CycleExercise']),_0x5b722f=await _0x1c89a3['queryByFilter']({'cycleId':_0x310fcb,'exerciseId':_0x477124});if(!_0x5b722f)throw new NotFoundError([_0x323748(0x1e1)+_0x477124+'\x20not\x20found\x20in\x20cycle\x20id\x20'+_0x310fcb]);return ModelMapper[_0x323748(0x1d0)](_0x5b722f,ModelMapper[_0x323748(0x1d7)](_0x20f655));},module[_0x51444a(0x1ba)][_0x51444a(0x1c0)]=async(_0x3b9b61,_0x56c03b,_0x2a5b4e,_0x2489c0,_0x44562e,_0x4d8fd3)=>{const _0x2f10cd=_0x51444a;await ensureCycle(_0x3b9b61,_0x56c03b);const _0x1e0855={'cycleId':_0x56c03b},_0x1506db=RepositoryFactory['create'](RepositoryName['CycleExercise']);let _0x24cdf4=await _0x1506db[_0x2f10cd(0x1bc)](_0x1e0855,null,_0x2a5b4e,_0x2489c0,_0x44562e,_0x4d8fd3);return _0x24cdf4['content']=await Promise[_0x2f10cd(0x1e0)](_0x24cdf4[_0x2f10cd(0x1c9)][_0x2f10cd(0x1b5)](async _0xf4025f=>{const _0x5899e4=_0x2f10cd,_0x459151=await ensureExercise(_0x3b9b61,_0xf4025f[_0x5899e4(0x1b2)]);return ModelMapper['mapCycleExerciseEntity'](_0xf4025f,ModelMapper['mapExerciseEntity'](_0x459151));})),_0x24cdf4;};