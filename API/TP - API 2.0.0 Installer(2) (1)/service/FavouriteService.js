'use strict';const _0x5dd4=['map','../utils/PagedResult','Routine','\x20not\x20found','all','186oHAVhK','queryById','userId','create','mapRoutineEntity','340743SbqxDJ','../repository/RepositoryFactory','mapFavouriteEntity','1ZmXGbQ','categoryId','content','add','insert','User\x20is\x20not\x20the\x20owner\x20of\x20routine\x20id\x20','Category','480733NpjWSh','routineId','remove','7949AkaJfC','retrieveList','Routine\x20id\x20','exports','1wppJEz','857105sgzQAO','7KJQLuF','284997MJvNei','./ModelMapper','Favourite','1IWzOBF','995032YIhEqp','deleteByFilter','857039snTiPF'];const _0x12ad60=_0x477b;(function(_0x3e26d3,_0x750fac){const _0x197612=_0x477b;while(!![]){try{const _0x26d57e=parseInt(_0x197612(0x1ad))+-parseInt(_0x197612(0x1ba))*-parseInt(_0x197612(0x1a8))+parseInt(_0x197612(0x1bf))+parseInt(_0x197612(0x19f))*-parseInt(_0x197612(0x19c))+parseInt(_0x197612(0x1be))*parseInt(_0x197612(0x1a0))+-parseInt(_0x197612(0x1b0))*-parseInt(_0x197612(0x1a2))+-parseInt(_0x197612(0x1b7))*parseInt(_0x197612(0x1c0));if(_0x26d57e===_0x750fac)break;else _0x3e26d3['push'](_0x3e26d3['shift']());}catch(_0x148005){_0x3e26d3['push'](_0x3e26d3['shift']());}}}(_0x5dd4,0xd66e1));const {RepositoryName,RepositoryFactory}=require(_0x12ad60(0x1ae)),{ModelMapper}=require(_0x12ad60(0x19d)),{PagedResult}=require(_0x12ad60(0x1a4)),{NotFoundError,ForbiddenError}=require('../errors/errors');function _0x477b(_0x3a3f7f,_0x35bb3b){_0x3a3f7f=_0x3a3f7f-0x19c;let _0x5dd4e4=_0x5dd4[_0x3a3f7f];return _0x5dd4e4;}async function ensureRoutine(_0x3d89ad,_0x16df69){const _0x1f782c=_0x12ad60,_0xd7a7a9=RepositoryFactory['create'](RepositoryName[_0x1f782c(0x1a5)]);let _0x23eae4=await _0xd7a7a9[_0x1f782c(0x1a9)](_0x16df69);if(!_0x23eae4)throw new NotFoundError([_0x1f782c(0x1bc)+_0x16df69+_0x1f782c(0x1a6)]);if(_0x23eae4[_0x1f782c(0x1aa)]!==_0x3d89ad['id'])throw new ForbiddenError([_0x1f782c(0x1b5)+_0x16df69]);return _0x23eae4;}module[_0x12ad60(0x1bd)][_0x12ad60(0x1b3)]=async(_0x2105f0,_0x5af467)=>{const _0x5700a4=_0x12ad60;await ensureRoutine(_0x2105f0,_0x5af467);const _0x54176d=RepositoryFactory[_0x5700a4(0x1ab)](RepositoryName[_0x5700a4(0x19e)]);await _0x54176d[_0x5700a4(0x1b4)]({'userId':_0x2105f0['id'],'routineId':_0x5af467});},module[_0x12ad60(0x1bd)][_0x12ad60(0x1b9)]=async(_0x38c5a8,_0x2fd1fd)=>{const _0x47caf6=_0x12ad60;await ensureRoutine(_0x38c5a8,_0x2fd1fd);const _0x3368ea=RepositoryFactory[_0x47caf6(0x1ab)](RepositoryName['Favourite']);await _0x3368ea[_0x47caf6(0x1a1)]({'userId':_0x38c5a8['id'],'routineId':_0x2fd1fd});},module[_0x12ad60(0x1bd)][_0x12ad60(0x1bb)]=async(_0x2800e2,_0x17fe39,_0x5f0d72,_0x1d2fa6,_0x1fe519)=>{const _0x132c92=_0x12ad60,_0x36742d={'userId':_0x2800e2['id']},_0x513c67=RepositoryFactory[_0x132c92(0x1ab)](RepositoryName[_0x132c92(0x19e)]);let _0x3a3634=await _0x513c67['queryByAdvancedFilter'](_0x36742d,_0x17fe39,_0x5f0d72,_0x1d2fa6,_0x1fe519);return _0x3a3634[_0x132c92(0x1b2)]=await Promise[_0x132c92(0x1a7)](_0x3a3634[_0x132c92(0x1b2)][_0x132c92(0x1a3)](async _0x18c89d=>{const _0x4477b2=_0x132c92,_0x23b5b4=RepositoryFactory[_0x4477b2(0x1ab)](RepositoryName[_0x4477b2(0x1a5)]),_0x3bc388=await _0x23b5b4['queryById'](_0x18c89d[_0x4477b2(0x1b8)]);let _0x40e8ae;if(_0x3bc388[_0x4477b2(0x1b1)]){const _0x583b4e=RepositoryFactory[_0x4477b2(0x1ab)](RepositoryName[_0x4477b2(0x1b6)]);_0x40e8ae=await _0x583b4e[_0x4477b2(0x1a9)](_0x3bc388['categoryId']);}return ModelMapper[_0x4477b2(0x1af)](_0x18c89d,ModelMapper[_0x4477b2(0x1ac)](_0x3bc388,undefined,_0x40e8ae));})),_0x3a3634;};