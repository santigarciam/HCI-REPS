'use strict';const _0x42c9=['content','modify','1172126FtjYXo','Exercise\x20id\x20','658816tNiDVf','queryById','deleteById','exports','185053MPGNOR','update','retrieve','insert','map','create','\x20not\x20found','userId','../errors/errors','queryByAdvancedFilter','retrieveList','236609BuPDxF','Exercise','1WdTybH','mapImageDto','Image\x20id\x20','Image','2MQmDOz','remove','mapImageEntity','User\x20is\x20not\x20the\x20owner\x20of\x20exercise\x20id\x20','334565vsyqWi','228572lPoGtI','286032lZmrtJ'];function _0x3e7e(_0xa85c2e,_0x527e53){_0xa85c2e=_0xa85c2e-0x1d0;let _0x42c91f=_0x42c9[_0xa85c2e];return _0x42c91f;}const _0x41fe8f=_0x3e7e;(function(_0xffe5f,_0x51ddd8){const _0x52277b=_0x3e7e;while(!![]){try{const _0x18299e=parseInt(_0x52277b(0x1ec))+-parseInt(_0x52277b(0x1d1))+-parseInt(_0x52277b(0x1ea))+parseInt(_0x52277b(0x1e0))*-parseInt(_0x52277b(0x1e6))+parseInt(_0x52277b(0x1d5))+parseInt(_0x52277b(0x1eb))*parseInt(_0x52277b(0x1e2))+parseInt(_0x52277b(0x1ef));if(_0x18299e===_0x51ddd8)break;else _0xffe5f['push'](_0xffe5f['shift']());}catch(_0x2fafc3){_0xffe5f['push'](_0xffe5f['shift']());}}}(_0x42c9,0x62ec0));const {RepositoryName,RepositoryFactory}=require('../repository/RepositoryFactory'),{ModelMapper}=require('./ModelMapper'),{NotFoundError,ForbiddenError}=require(_0x41fe8f(0x1dd));async function ensureExercise(_0x1b95c9,_0x316f8b){const _0x1d7b9b=_0x41fe8f,_0x15bb31=RepositoryFactory[_0x1d7b9b(0x1da)](RepositoryName[_0x1d7b9b(0x1e1)]),_0x1a550d=await _0x15bb31['queryById'](_0x316f8b);if(!_0x1a550d)throw new NotFoundError([_0x1d7b9b(0x1d0)+_0x316f8b+'\x20not\x20found']);if(_0x1a550d[_0x1d7b9b(0x1dc)]!==_0x1b95c9['id'])throw new ForbiddenError([_0x1d7b9b(0x1e9)+_0x316f8b]);return _0x1a550d;}async function ensureImage(_0x51eff9){const _0x4c920a=_0x41fe8f,_0x5530de=RepositoryFactory[_0x4c920a(0x1da)](RepositoryName[_0x4c920a(0x1e5)]);let _0x327b67=await _0x5530de[_0x4c920a(0x1d2)](_0x51eff9);if(!_0x327b67)throw new NotFoundError([_0x4c920a(0x1e4)+_0x51eff9+_0x4c920a(0x1db)]);return _0x327b67;}module[_0x41fe8f(0x1d4)]['add']=async(_0x2fd897,_0x542ecf,_0xc2f74)=>{const _0x5b25b6=_0x41fe8f;await ensureExercise(_0x2fd897,_0x542ecf);const _0x5d3b71=ModelMapper[_0x5b25b6(0x1e3)](_0xc2f74,_0x542ecf),_0x1ed2c1=RepositoryFactory[_0x5b25b6(0x1da)](RepositoryName[_0x5b25b6(0x1e5)]),_0x2dd0dc=await _0x1ed2c1[_0x5b25b6(0x1d8)](_0x5d3b71);return ModelMapper[_0x5b25b6(0x1e8)](_0x2dd0dc);},module[_0x41fe8f(0x1d4)][_0x41fe8f(0x1ee)]=async(_0x5d4315,_0x5a20a0,_0x248a0d,_0x41952e)=>{const _0x1a3f44=_0x41fe8f;await ensureExercise(_0x5d4315,_0x5a20a0);const _0x29d287=RepositoryFactory[_0x1a3f44(0x1da)](RepositoryName[_0x1a3f44(0x1e5)]);let _0x3b1bd4=await ensureImage(_0x248a0d);return ModelMapper['updateImageDto'](_0x3b1bd4,_0x41952e),_0x3b1bd4=await _0x29d287[_0x1a3f44(0x1d6)](_0x3b1bd4),ModelMapper[_0x1a3f44(0x1e8)](_0x3b1bd4);},module[_0x41fe8f(0x1d4)][_0x41fe8f(0x1e7)]=async(_0x28e1b4,_0x2d7850,_0x4bd117)=>{const _0xf3836f=_0x41fe8f;await ensureExercise(_0x28e1b4,_0x2d7850);const _0x51106c=RepositoryFactory[_0xf3836f(0x1da)](RepositoryName[_0xf3836f(0x1e5)]),_0x312f36=await _0x51106c[_0xf3836f(0x1d3)](_0x4bd117);if(_0x312f36===0x0)throw new NotFoundError([_0xf3836f(0x1e4)+_0x4bd117+_0xf3836f(0x1db)]);},module[_0x41fe8f(0x1d4)][_0x41fe8f(0x1d7)]=async(_0x3f7ff1,_0x11a1ca,_0x380e4c)=>{const _0x49c7de=_0x41fe8f;await ensureExercise(_0x3f7ff1,_0x11a1ca);const _0x73be43=await ensureImage(_0x380e4c);return ModelMapper[_0x49c7de(0x1e8)](_0x73be43);},module[_0x41fe8f(0x1d4)][_0x41fe8f(0x1df)]=async(_0x55376b,_0x32fd38,_0x5a0135,_0x308ddb,_0x374ca2,_0x4894ca)=>{const _0x5d1615=_0x41fe8f;await ensureExercise(_0x55376b,_0x32fd38);const _0x13f360={'exerciseId':_0x32fd38},_0x58103c=RepositoryFactory[_0x5d1615(0x1da)](RepositoryName[_0x5d1615(0x1e5)]);let _0x1ee19a=await _0x58103c[_0x5d1615(0x1de)](_0x13f360,null,_0x5a0135,_0x308ddb,_0x374ca2,_0x4894ca);return _0x1ee19a[_0x5d1615(0x1ed)]=_0x1ee19a[_0x5d1615(0x1ed)][_0x5d1615(0x1d9)](_0x29da74=>ModelMapper[_0x5d1615(0x1e8)](_0x29da74)),_0x1ee19a;};